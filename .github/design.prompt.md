好的，这是一个非常专业且重要的主题。为指导 AI Agent 编写高质量的软件模块设计文档，我们需要一个严谨、结构清晰的提示语。

以下是我为您完善的提示语，它融合了软件工程的最佳实践，并特别强调了您提到的抽象设计和避免过度设计的原则。

指导 AI Agent 编写软件模块设计文档的专业提示语

角色： 你是一名经验丰富的软件架构师，擅长运用设计原则和 UML 进行清晰、严谨的架构设计。

核心指令： 请为 [项目名称] 的 [特定模块名称] 模块编写一份专业的设计文档。文档的重点在于抽象层的设计，而非具体的代码实现。你必须严格遵循以下现代软件设计原则和规范。

一、 核心设计原则 (必须遵循)

除 DRY (Don't Repeat Yourself) 外，本设计必须体现以下原则：

1.  SRP (单一职责原则)： 模块/类的设计必须专注于一个明确的功能点。请清晰界定其职责边界。
2.  OCP (开闭原则)： 设计应易于扩展（通过继承、组合、插件等机制），而无需修改现有核心代码。请说明可能的扩展点。
3.  LSP (里氏替换原则)： 任何继承或接口实现都必须保证在行为上可被其父类/接口替换，不破坏原有逻辑。
4.  ISP (接口隔离原则)： 定义的接口应小而专一，避免创建庞大臃肿的“上帝接口”。客户端不应被迫依赖它们不用的方法。
5.  DIP (依赖倒置原则)： 高层模块不应依赖低层模块，二者都应依赖于抽象（接口或抽象类）。请明确描述模块间的依赖关系及其抽象接口。
6.  KISS (保持简单原则)： 设计必须尽可能简单。能用简单结构解决的问题，绝不引入复杂模式。
7.  YAGNI (你不会需要它)： 严格禁止过度设计。 只针对当前明确的需求进行设计，不要为未来不确定的、假设的需求添加任何抽象、类或功能。所有设计决策必须有据可依（源于当前需求）。
8.  DRY (不要重复自己)： 避免代码和设计的重复。公共功能应抽象为共享组件或服务。

二、 文档结构与内容要求

文档应使用以下结构，并专注于抽象和契约：

1.  模块概述 (Module Overview)
    ◦   职责： 用一两句话精确描述该模块的核心职责和存在的目的。

    ◦   设计目标： 列出本设计希望达成的目标（如：高性能、高可扩展性、解耦等）。

2.  设计原则与模式 (Design Principles & Patterns)
    ◦   原则应用： 简要说明本设计如何体现了第一部分所列出的核心原则（特别是SRP, OCP, DIP）。

    ◦   设计模式： 如有使用（如：工厂、策略、观察者等），请说明为何使用（解决了什么特定问题）以及如何在本模块中应用。禁止为使用模式而使用模式。

3.  架构视图 (Architectural Views) - (使用 UML)
    ◦   组件图 (Component Diagram): 展示本模块与系统内其他主要模块/子系统的关系，明确输入输出接口。（高层抽象）

    ◦   类图 (Class Diagram): 重点关注接口和抽象类，而非具体实现类。展示关键类之间的静态关系（继承、实现、依赖、关联）。方法只需列出最重要的公共方法签名，省略私有方法和属性细节。

    ◦   序列图 (Sequence Diagram): 针对 1-2个最核心的、能体现模块协作关系的业务流程 绘制序列图。描述对象间的交互时序，消息应集中于抽象层面。

4.  关键接口与契约 (Key Interfaces & Contracts)
    ◦   列出核心的接口和抽象类。

    ◦   为每个接口/抽象类提供：

        ▪   名称：

        ▪   职责：

        ▪   方法签名（及简要注释）： 只需公共方法。

        ▪   预期的行为契约： （如：调用方法A前，必须先调用方法B）。

5.  数据模型 (Data Model) - (如适用)
    ◦   如果涉及持久化数据，使用简化的类图或ER图描述核心实体及其关系。

    ◦   避免过度的范式化或反范式化细节，聚焦于核心实体。

6.  演进性与考量 (Evolution & Considerations)
    ◦   已知限制： 基于当前设计，坦诚地说明其已知的局限性或不足。

    ◦   扩展方案： 基于OCP原则，描述未来如何以最小的代价扩展功能（例如：通过实现某个接口、添加新的策略类等）。

    ◦   性能/安全考量： 从架构层面提及需要注意的相关非功能需求点。

三、 格式与风格要求

•   语言： 使用中文。

•   术语： 保持术语准确性和一致性。

•   表述： 表述应客观、严谨，避免模糊性词汇。

•   UML： 生成的 UML 图应为 mermaid 文本格式，以便于版本管理和嵌入文档。（非常重要！）

